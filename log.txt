May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1678, data={'tile': <GameTile.P8: 16>})
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1678
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 2, <GameTile.Z6: 32>: 2, <GameTile.P8: 16>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.Z4: 30>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P9: 17>: 1}), call_blocks=[], tsumo_tile=<GameTile.P8: 16>, flower_point=0, FULL_HAND_SIZE=14)
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1678, data={'tile': <GameTile.P8: 16>})
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 16
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1681
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:57:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1683, data={'tile': <GameTile.F3: 37>})
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1683
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.F3: 37>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.F3: 37>, flower_point=0, FULL_HAND_SIZE=14)
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1683, data={'tile': <GameTile.F3: 37>})
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 37
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1686
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:57:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:57:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:57:55 ip-172-31-13-179 python[679345]: WARNING:  Invalid HTTP request received.
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1688, data={'tile': <GameTile.F5: 39>})
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1688
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.S5: 22>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1, <GameTile.F5: 39>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.F5: 39>, flower_point=3, FULL_HAND_SIZE=14)
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1688, data={'tile': <GameTile.F5: 39>})
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 39
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1691
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:58:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1693, data={'tile': <GameTile.S9: 26>})
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1693
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.S9: 26>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1}), call_blocks=[], tsumo_tile=<GameTile.M1: 0>, flower_point=1, FULL_HAND_SIZE=14)
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1693, data={'tile': <GameTile.S9: 26>})
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 26
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 09:58:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.002초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.002 seconds)
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 0: -0.002 seconds
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 0 due to timeout.
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1696
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:58:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:58:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.002초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.002초)
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1698, data={'tile': <GameTile.M2: 1>})
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1698
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 2, <GameTile.Z6: 32>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.Z4: 30>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P8: 16>: 1, <GameTile.P9: 17>: 1, <GameTile.M2: 1>: 1}), call_blocks=[], tsumo_tile=<GameTile.M2: 1>, flower_point=0, FULL_HAND_SIZE=14)
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1698, data={'tile': <GameTile.M2: 1>})
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 1
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1701
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:59:13 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:59:29 ip-172-31-13-179 python[679345]: WARNING:  Invalid HTTP request received.
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1703, data={'tile': <GameTile.S7: 24>})
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1703
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.S7: 24>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.S7: 24>, flower_point=0, FULL_HAND_SIZE=14)
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1703, data={'tile': <GameTile.S7: 24>})
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 24
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1706
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:59:33 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1708, data={'tile': <GameTile.Z7: 33>})
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1708
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.S5: 22>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1, <GameTile.Z7: 33>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.Z7: 33>, flower_point=3, FULL_HAND_SIZE=14)
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1708, data={'tile': <GameTile.Z7: 33>})
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 33
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1711
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 09:59:53 ip-172-31-13-179 python[679345]: 2025-05-26 09:59:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1713, data={'tile': <GameTile.S6: 23>})
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1713
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.S9: 26>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1, <GameTile.S6: 23>: 1}), call_blocks=[], tsumo_tile=<GameTile.S6: 23>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1713, data={'tile': <GameTile.S6: 23>})
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 23
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:00:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 0: 0.000 seconds
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 0 due to timeout.
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1716
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:00:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1718, data={'tile': <GameTile.Z4: 30>})
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1718
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 2, <GameTile.Z6: 32>: 2, <GameTile.Z4: 30>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P8: 16>: 1, <GameTile.P9: 17>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z4: 30>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1718, data={'tile': <GameTile.Z4: 30>})
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 30
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1721
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:00:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:00:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:01:07 ip-172-31-13-179 python[679345]: WARNING:  Invalid HTTP request received.
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1723, data={'tile': <GameTile.M3: 2>})
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1723
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.M3: 2>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.M3: 2>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1723, data={'tile': <GameTile.M3: 2>})
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 2
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1726
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:01:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1728, data={'tile': <GameTile.S5: 22>})
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1728
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.S5: 22>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.S5: 22>, flower_point=3, FULL_HAND_SIZE=14)
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1728, data={'tile': <GameTile.S5: 22>})
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 22
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1731
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:01:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1733, data={'tile': <GameTile.S8: 25>})
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1733
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.S9: 26>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1, <GameTile.S8: 25>: 1}), call_blocks=[], tsumo_tile=<GameTile.S8: 25>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1733, data={'tile': <GameTile.S8: 25>})
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 25
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:01:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:01:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 0: 0.000 seconds
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 0 due to timeout.
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1736
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:02:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1738, data={'tile': <GameTile.M9: 8>})
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1738
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 3, <GameTile.Z6: 32>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.Z4: 30>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P8: 16>: 1, <GameTile.P9: 17>: 1}), call_blocks=[], tsumo_tile=<GameTile.M9: 8>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1738, data={'tile': <GameTile.M9: 8>})
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 8
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:02:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 1: 0.000 seconds
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 1 due to timeout.
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1741
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:02:53 ip-172-31-13-179 python[679345]: 2025-05-26 10:02:53 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1743, data={'tile': <GameTile.S8: 25>})
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1743
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.S8: 25>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.S8: 25>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1743, data={'tile': <GameTile.S8: 25>})
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 25
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1746
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:03:13 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:13 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1748, data={'tile': <GameTile.M3: 2>})
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1748
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.S5: 22>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1, <GameTile.M3: 2>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.M3: 2>, flower_point=3, FULL_HAND_SIZE=14)
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1748, data={'tile': <GameTile.M3: 2>})
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 2
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:03:33 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:33 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:03:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:34 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.NORTH: 3>}
May 26 10:03:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:34 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.NORTH: 3>}, wait_time: 20.000 seconds
May 26 10:03:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 3: 0.000 seconds
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 3 due to timeout.
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1751
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:03:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:03:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.002초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.002초)
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1753, data={'tile': <GameTile.Z2: 28>})
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1753
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.S9: 26>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1, <GameTile.Z2: 28>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z2: 28>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1753, data={'tile': <GameTile.Z2: 28>})
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 28
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1756
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:04:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1758, data={'tile': <GameTile.Z3: 29>})
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1758
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 2, <GameTile.Z6: 32>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.Z4: 30>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P8: 16>: 1, <GameTile.P9: 17>: 1, <GameTile.Z3: 29>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z3: 29>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1758, data={'tile': <GameTile.Z3: 29>})
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 29
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1761
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:04:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1763, data={'tile': <GameTile.S7: 24>})
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1763
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.S7: 24>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.S7: 24>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1763, data={'tile': <GameTile.S7: 24>})
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 24
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1766
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:04:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:04:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:11 ip-172-31-13-179 python[679345]: INFO:     3.135.194.4:48394 - "POST /api/v1/games/start HTTP/1.1" 200 OK
May 26 10:05:12 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 51266) - "WebSocket /api/v1/games/2?user_id=bot-9b8c786e&nickname=Bot(Easy)" [accepted]
May 26 10:05:12 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:05:14 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 51268) - "WebSocket /api/v1/games/2?user_id=bot-535beb2e&nickname=Bot(Easy)" [accepted]
May 26 10:05:14 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1768, data={'tile': <GameTile.P9: 17>})
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1768
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.S5: 22>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1, <GameTile.P9: 17>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.P9: 17>, flower_point=3, FULL_HAND_SIZE=14)
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1768, data={'tile': <GameTile.P9: 17>})
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 17
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1771
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:15 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 51270) - "WebSocket /api/v1/games/2?user_id=bot-4a2735a7&nickname=Bot(Easy)" [accepted]
May 26 10:05:15 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:05:17 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 57468) - "WebSocket /api/v1/games/2?user_id=346929222&nickname=Dok4" [accepted]
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 INFO [app.core.room_manager] Game 2: all players connected, game task started
May 26 10:05:17 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.fsm.round_fsm] InitState: initializing round data
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.fsm.round_fsm] InitState: transition to FlowerState
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: performing init flower action
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: wait for init flower ok
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [RoundManager] INIT_FLOWER_OK 응답을 기다립니다.
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=9999.000초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.188초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 0 (총 1/4)
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.004초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 2 (총 2/4)
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=-1, data={})
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.008초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 3 (총 3/4)
May 26 10:05:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=-1, data={})
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=-1, data={})
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 6.111초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 1 (총 4/4)
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [RoundManager] 모든 플레이어의 OK 응답 수신 완료.
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: transition to TsumoState with prev_type=INIT_FLOWER
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: INIT_FLOWER
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 32, 'is_tsumogiri': False})
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 32, 'is_tsumogiri': False})
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.239초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 32, 'is_tsumogiri': False}) (elapsed_time: 0.239초)
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 2
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.S1: 18>: 2, <GameTile.S3: 20>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S2: 19>: 1, <GameTile.M7: 6>: 1, <GameTile.Z6: 32>: 1, <GameTile.M9: 8>: 1, <GameTile.M1: 0>: 1, <GameTile.M8: 7>: 1}), call_blocks=[], tsumo_tile=<GameTile.M6: 5>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 32, 'is_tsumogiri': False})
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 32
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.NORTH: 3>}
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.NORTH: 3>}, wait_time: 20.000 seconds
May 26 10:05:23 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:23 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.213초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>}) (elapsed_time: 0.213 seconds)
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 3: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=<GameTile.Z6: 32>)
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=32), selected_events count: 1
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Final action selected, breaking out of wait loop.
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=32), total selected events: 1
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=3, data={'tile': <GameTile.Z6: 32>})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=5, data={'tile': 9, 'is_tsumogiri': False})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=5, data={'tile': 9, 'is_tsumogiri': False})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.200초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: PON, tile: 9
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 10
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=10, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=10, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.203초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=10, data={'tile': 33, 'is_tsumogiri': True}) (elapsed_time: 0.203초)
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 11
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.S1: 18>: 2, <GameTile.S3: 20>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S2: 19>: 1, <GameTile.M7: 6>: 1, <GameTile.M9: 8>: 1, <GameTile.M1: 0>: 1, <GameTile.M8: 7>: 1, <GameTile.Z7: 33>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z7: 33>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=10, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 33
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 14
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:24 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:24 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=14, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=14, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.414초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=14, data={'tile': 31, 'is_tsumogiri': False}) (elapsed_time: 1.414초)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 15
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 1, <GameTile.S4: 21>: 1, <GameTile.S7: 24>: 1, <GameTile.S5: 22>: 1, <GameTile.P7: 15>: 1, <GameTile.M1: 0>: 1, <GameTile.M5: 4>: 1, <GameTile.Z5: 31>: 1, <GameTile.P4: 12>: 1, <GameTile.M9: 8>: 1, <GameTile.M3: 2>: 1, <GameTile.P1: 9>: 1, <GameTile.S8: 25>: 1, <GameTile.Z2: 28>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z2: 28>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=14, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 31
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 18
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=18, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=18, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.206초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=18, data={'tile': 30, 'is_tsumogiri': False}) (elapsed_time: 0.206초)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 19
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P5: 13>: 3, <GameTile.P8: 16>: 2, <GameTile.S7: 24>: 1, <GameTile.M5: 4>: 1, <GameTile.M3: 2>: 1, <GameTile.Z3: 29>: 1, <GameTile.S5: 22>: 1, <GameTile.P3: 11>: 1, <GameTile.P9: 17>: 1, <GameTile.Z4: 30>: 1, <GameTile.M1: 0>: 1}), call_blocks=[], tsumo_tile=<GameTile.M1: 0>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=18, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 30
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 22
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=22, data={'tile': 33, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=22, data={'tile': 33, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.213초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=22, data={'tile': 33, 'is_tsumogiri': False}) (elapsed_time: 0.213초)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 23
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S2: 19>: 2, <GameTile.S3: 20>: 1, <GameTile.S5: 22>: 1, <GameTile.P4: 12>: 1, <GameTile.S9: 26>: 1, <GameTile.Z7: 33>: 1, <GameTile.S8: 25>: 1, <GameTile.M2: 1>: 1, <GameTile.M3: 2>: 1, <GameTile.P2: 10>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z6: 32>, source_seat=<RelativeSeat.SHIMO: 1>, source_tile_index=0)], tsumo_tile=<GameTile.P2: 10>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=22, data={'tile': 33, 'is_tsumogiri': False})
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 33
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 26
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:26 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:26 DEBUG [app.api.v1.endpoints.game_websocket_handler] Invalid Person's Hand GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.S1: 18>: 2, <GameTile.S3: 20>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S2: 19>: 1, <GameTile.M7: 6>: 1, <GameTile.M9: 8>: 1, <GameTile.M1: 0>: 1, <GameTile.M8: 7>: 1, <GameTile.P6: 14>: 1}), call_blocks=[], tsumo_tile=<GameTile.P6: 14>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1773, data={'tile': <GameTile.S1: 18>})
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1773
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.S9: 26>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1, <GameTile.S1: 18>: 1}), call_blocks=[], tsumo_tile=<GameTile.S1: 18>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1773, data={'tile': <GameTile.S1: 18>})
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 18
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1776
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=28, data={'tile': <GameTile.P6: 14>})
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 28
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.S1: 18>: 2, <GameTile.S3: 20>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S2: 19>: 1, <GameTile.M7: 6>: 1, <GameTile.M9: 8>: 1, <GameTile.M1: 0>: 1, <GameTile.M8: 7>: 1, <GameTile.P6: 14>: 1}), call_blocks=[], tsumo_tile=<GameTile.P6: 14>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=28, data={'tile': <GameTile.P6: 14>})
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 14
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 31
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:46 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:46 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:49 ip-172-31-13-179 python[679345]: INFO:     connection closed
May 26 10:05:49 ip-172-31-13-179 python[679345]: INFO:     connection closed
May 26 10:05:49 ip-172-31-13-179 python[679345]: INFO:     connection closed
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 WARNING [app.core.room_manager] Game 2: send to bot-9b8c786e failed, removing: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 WARNING [app.core.room_manager] Game 2: send to bot-535beb2e failed, removing: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 WARNING [app.core.room_manager] Game 2: send to bot-4a2735a7 failed, removing: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 INFO [app.core.room_manager] Game 2: connection for bot-9b8c786e cleaned up
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 INFO [app.core.room_manager] Game 2: connection for bot-535beb2e cleaned up
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 INFO [app.core.room_manager] Game 2: connection for bot-4a2735a7 cleaned up
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=31, data={'tile': 9, 'is_tsumogiri': False})
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=31, data={'tile': 9, 'is_tsumogiri': False})
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 3.478초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=31, data={'tile': 9, 'is_tsumogiri': False}) (elapsed_time: 3.478초)
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 32
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.Z2: 28>: 2, <GameTile.M4: 3>: 1, <GameTile.S4: 21>: 1, <GameTile.S7: 24>: 1, <GameTile.S5: 22>: 1, <GameTile.P7: 15>: 1, <GameTile.M1: 0>: 1, <GameTile.M5: 4>: 1, <GameTile.P4: 12>: 1, <GameTile.M9: 8>: 1, <GameTile.M3: 2>: 1, <GameTile.P1: 9>: 1, <GameTile.S8: 25>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z2: 28>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=31, data={'tile': 9, 'is_tsumogiri': False})
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 9
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 35
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:05:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1778, data={'tile': <GameTile.M5: 4>})
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1778
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M9: 8>: 2, <GameTile.Z6: 32>: 2, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.Z4: 30>: 1, <GameTile.S6: 23>: 1, <GameTile.S8: 25>: 1, <GameTile.S2: 19>: 1, <GameTile.S7: 24>: 1, <GameTile.P8: 16>: 1, <GameTile.P9: 17>: 1, <GameTile.M5: 4>: 1}), call_blocks=[], tsumo_tile=<GameTile.M5: 4>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1778, data={'tile': <GameTile.M5: 4>})
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 4
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>, <AbsoluteSeat.NORTH: 3>}
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>, <AbsoluteSeat.NORTH: 3>}, wait_time: 20.000 seconds
May 26 10:05:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:05:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=37, data={'tile': <GameTile.P9: 17>})
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 37
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P5: 13>: 3, <GameTile.P8: 16>: 2, <GameTile.P9: 17>: 2, <GameTile.S7: 24>: 1, <GameTile.M5: 4>: 1, <GameTile.M3: 2>: 1, <GameTile.Z3: 29>: 1, <GameTile.S5: 22>: 1, <GameTile.P3: 11>: 1, <GameTile.M1: 0>: 1}), call_blocks=[], tsumo_tile=<GameTile.P9: 17>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=37, data={'tile': <GameTile.P9: 17>})
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 17
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 40
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 1: 0.000 seconds
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 1 due to timeout.
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 3: 0.000 seconds
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 3 due to timeout.
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1781
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:17 ip-172-31-13-179 python[679345]: INFO:     connection closed
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 WARNING [app.core.room_manager] Game 2: send to 346929222 failed, removing: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 INFO [app.core.room_manager] Game 2: connection for 346929222 cleaned up
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=42, data={'tile': <GameTile.P1: 9>})
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 42
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S2: 19>: 2, <GameTile.S3: 20>: 1, <GameTile.S5: 22>: 1, <GameTile.P4: 12>: 1, <GameTile.S9: 26>: 1, <GameTile.S8: 25>: 1, <GameTile.M2: 1>: 1, <GameTile.M3: 2>: 1, <GameTile.P2: 10>: 1, <GameTile.P1: 9>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z6: 32>, source_seat=<RelativeSeat.SHIMO: 1>, source_tile_index=0)], tsumo_tile=<GameTile.P1: 9>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=42, data={'tile': <GameTile.P1: 9>})
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 9
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 45
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:30 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:30 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1783, data={'tile': <GameTile.S5: 22>})
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1783
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.M6: 5>: 1, <GameTile.Z4: 30>: 1, <GameTile.M7: 6>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S6: 23>: 1, <GameTile.Z1: 27>: 1, <GameTile.P2: 10>: 1, <GameTile.S5: 22>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z5: 31>, source_seat=<RelativeSeat.TOI: 2>, source_tile_index=0)], tsumo_tile=<GameTile.S5: 22>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=1783, data={'tile': <GameTile.S5: 22>})
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 22
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1786
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:34 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:34 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:36 ip-172-31-13-179 python[679345]: INFO:     3.135.194.4:51086 - "POST /api/v1/games/start HTTP/1.1" 200 OK
May 26 10:06:39 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 49836) - "WebSocket /api/v1/games/3?user_id=bot-e7698531&nickname=Bot(Easy)" [accepted]
May 26 10:06:39 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:06:40 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 49844) - "WebSocket /api/v1/games/3?user_id=bot-3bcb1776&nickname=Bot(Easy)" [accepted]
May 26 10:06:40 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:06:42 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 49858) - "WebSocket /api/v1/games/3?user_id=bot-73753cc5&nickname=Bot(Easy)" [accepted]
May 26 10:06:42 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:06:43 ip-172-31-13-179 python[679345]: INFO:     ('127.0.0.1', 49874) - "WebSocket /api/v1/games/3?user_id=346929222&nickname=Dok4" [accepted]
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 INFO [app.core.room_manager] Game 3: all players connected, game task started
May 26 10:06:43 ip-172-31-13-179 python[679345]: INFO:     connection open
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.fsm.round_fsm] InitState: initializing round data
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.fsm.round_fsm] InitState: transition to FlowerState
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: performing init flower action
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: wait for init flower ok
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [RoundManager] INIT_FLOWER_OK 응답을 기다립니다.
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=9999.000초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.189초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 3 (총 1/4)
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.003초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 0 (총 2/4)
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=-1, data={})
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.021초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 1 (총 3/4)
May 26 10:06:43 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:43 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=60.000초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=-1, data={})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.INIT_FLOWER_OK: 12>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=-1, data={})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 5.496초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [RoundManager] OK 응답: 2 (총 4/4)
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [RoundManager] 모든 플레이어의 OK 응답 수신 완료.
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] FlowerState: transition to TsumoState with prev_type=INIT_FLOWER
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: INIT_FLOWER
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.207초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 27, 'is_tsumogiri': False}) (elapsed_time: 0.207초)
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 2
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.Z3: 29>: 1, <GameTile.P2: 10>: 1, <GameTile.Z1: 27>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1}), call_blocks=[], tsumo_tile=<GameTile.S4: 21>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=1, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 27
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 5
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=5, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=5, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.235초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=5, data={'tile': 31, 'is_tsumogiri': False}) (elapsed_time: 0.235초)
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 6
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 2, <GameTile.P2: 10>: 2, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.Z5: 31>: 1, <GameTile.Z2: 28>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1}), call_blocks=[], tsumo_tile=<GameTile.P6: 14>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=5, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 31
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 9
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:49 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:49 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.000초)
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=47, data={'tile': <GameTile.M3: 2>})
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 47
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.S1: 18>: 2, <GameTile.S3: 20>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S2: 19>: 1, <GameTile.M7: 6>: 1, <GameTile.M9: 8>: 1, <GameTile.M1: 0>: 1, <GameTile.M8: 7>: 1, <GameTile.M3: 2>: 1}), call_blocks=[], tsumo_tile=<GameTile.M3: 2>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=47, data={'tile': <GameTile.M3: 2>})
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 2
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:06:50 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:50 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=9, data={'tile': 16, 'is_tsumogiri': False})
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=9, data={'tile': 16, 'is_tsumogiri': False})
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.797초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=9, data={'tile': 16, 'is_tsumogiri': False}) (elapsed_time: 1.797초)
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 10
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.Z7: 33>: 2, <GameTile.S8: 25>: 2, <GameTile.P8: 16>: 1, <GameTile.Z4: 30>: 1, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.Z3: 29>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z1: 27>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=9, data={'tile': 16, 'is_tsumogiri': False})
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 16
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 13
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:51 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:51 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=13, data={'tile': 23, 'is_tsumogiri': True})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=13, data={'tile': 23, 'is_tsumogiri': True})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.201초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=13, data={'tile': 23, 'is_tsumogiri': True}) (elapsed_time: 0.201초)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 14
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.P9: 17>: 1, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.M1: 0>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1, <GameTile.Z5: 31>: 1, <GameTile.S6: 23>: 1}), call_blocks=[], tsumo_tile=<GameTile.S6: 23>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=13, data={'tile': 23, 'is_tsumogiri': True})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 23
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=15, data={'tile': <GameTile.M1: 0>})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=15, data={'tile': <GameTile.M1: 0>})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.195초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=15, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.195 seconds)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 0: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=15, data={'tile': <GameTile.M1: 0>})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 17
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=17, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=17, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.207초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=17, data={'tile': 29, 'is_tsumogiri': False}) (elapsed_time: 0.207초)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 18
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.Z3: 29>: 1, <GameTile.P2: 10>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1}), call_blocks=[], tsumo_tile=<GameTile.M3: 2>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=17, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 29
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 21
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=21, data={'tile': 28, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=21, data={'tile': 28, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.229초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=21, data={'tile': 28, 'is_tsumogiri': False}) (elapsed_time: 0.229초)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 22
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 2, <GameTile.P2: 10>: 2, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.Z2: 28>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1}), call_blocks=[], tsumo_tile=<GameTile.M4: 3>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=21, data={'tile': 28, 'is_tsumogiri': False})
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 28
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 25
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:52 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:52 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.001초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.001초)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1788, data={'tile': <GameTile.Z1: 27>})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1788
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.P8: 16>: 1, <GameTile.P7: 15>: 1, <GameTile.M8: 7>: 1, <GameTile.S5: 22>: 1, <GameTile.M6: 5>: 1, <GameTile.P3: 11>: 1, <GameTile.P4: 12>: 1, <GameTile.S7: 24>: 1, <GameTile.Z1: 27>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.Z1: 27>, flower_point=3, FULL_HAND_SIZE=14)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=1788, data={'tile': <GameTile.Z1: 27>})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 27
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 1791
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=25, data={'tile': 5, 'is_tsumogiri': True})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=25, data={'tile': 5, 'is_tsumogiri': True})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.749초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=25, data={'tile': 5, 'is_tsumogiri': True}) (elapsed_time: 1.749초)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 26
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.Z7: 33>: 2, <GameTile.S8: 25>: 2, <GameTile.Z4: 30>: 1, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.Z3: 29>: 1, <GameTile.M6: 5>: 1}), call_blocks=[], tsumo_tile=<GameTile.M6: 5>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=25, data={'tile': 5, 'is_tsumogiri': True})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 5
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=27, data={'tile': <GameTile.M1: 0>})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=27, data={'tile': <GameTile.M1: 0>})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.215초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=27, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.215 seconds)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 1: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=27, data={'tile': <GameTile.M1: 0>})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.KAMI: 3>, tile=<GameTile.M1: 0>)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 29
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=29, data={'tile': 17, 'is_tsumogiri': False})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=29, data={'tile': 17, 'is_tsumogiri': False})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.196초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=29, data={'tile': 17, 'is_tsumogiri': False}) (elapsed_time: 0.196초)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 30
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.M1: 0>: 2, <GameTile.P9: 17>: 1, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1, <GameTile.Z5: 31>: 1}), call_blocks=[], tsumo_tile=<GameTile.M1: 0>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=29, data={'tile': 17, 'is_tsumogiri': False})
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 17
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:54 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:54 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=31, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=31, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.196초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=31, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.196 seconds)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 0: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=31, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 33
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=33, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=33, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.207초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=33, data={'tile': 10, 'is_tsumogiri': False}) (elapsed_time: 0.207초)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 34
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.P2: 10>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.S1: 18>: 1}), call_blocks=[], tsumo_tile=<GameTile.S1: 18>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=33, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 10
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=35, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=35, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.211초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=35, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.211 seconds)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 1: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=35, data={'tile': <GameTile.M1: 0>})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 37
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=37, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=37, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.229초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=37, data={'tile': 33, 'is_tsumogiri': True}) (elapsed_time: 0.229초)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 38
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 2, <GameTile.P2: 10>: 2, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.Z7: 33>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z7: 33>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=37, data={'tile': 33, 'is_tsumogiri': True})
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 33
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.WEST: 2>}
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.WEST: 2>}, wait_time: 20.000 seconds
May 26 10:06:55 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:55 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>})
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>})
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.175초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>}) (elapsed_time: 1.175 seconds)
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 2: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>})
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.Z7: 33>)
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=33), selected_events count: 1
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] Final action selected, breaking out of wait loop.
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=33), total selected events: 1
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>})
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': <GameTile.Z7: 33>})
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:06:57 ip-172-31-13-179 python[679345]: 2025-05-26 10:06:57 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:04 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:04 DEBUG [app.services.game_manager.manager] invalid action id: action id: 41, event GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=39, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=41, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=41, data={'tile': 29, 'is_tsumogiri': False})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 8.168초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: PON, tile: 29
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 46
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=46, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=46, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.197초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=46, data={'tile': 24, 'is_tsumogiri': True}) (elapsed_time: 0.197초)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 47
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.M1: 0>: 2, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1, <GameTile.Z5: 31>: 1, <GameTile.S7: 24>: 1}), call_blocks=[], tsumo_tile=<GameTile.S7: 24>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=46, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 24
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=48, data={'tile': <GameTile.M1: 0>})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=48, data={'tile': <GameTile.M1: 0>})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.195초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=48, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.195 seconds)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 0: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=48, data={'tile': <GameTile.M1: 0>})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 50
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=50, data={'tile': 28, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=50, data={'tile': 28, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.206초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=50, data={'tile': 28, 'is_tsumogiri': True}) (elapsed_time: 0.206초)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 51
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z2: 28>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=50, data={'tile': 28, 'is_tsumogiri': True})
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 28
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:05 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:05 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 54
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=54, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=54, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.231초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=54, data={'tile': 10, 'is_tsumogiri': False}) (elapsed_time: 0.231초)
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 55
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 2, <GameTile.P2: 10>: 2, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1}), call_blocks=[], tsumo_tile=<GameTile.P3: 11>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=54, data={'tile': 10, 'is_tsumogiri': False})
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 10
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 58
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:06 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:06 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=58, data={'tile': 2, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=58, data={'tile': 2, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.298초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=58, data={'tile': 2, 'is_tsumogiri': True}) (elapsed_time: 1.298초)
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 59
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.S8: 25>: 2, <GameTile.Z4: 30>: 1, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.M3: 2>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.M3: 2>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=58, data={'tile': 2, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 2
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 62
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=62, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=62, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.196초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=62, data={'tile': 24, 'is_tsumogiri': True}) (elapsed_time: 0.196초)
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 63
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.M1: 0>: 2, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1, <GameTile.Z5: 31>: 1, <GameTile.S7: 24>: 1}), call_blocks=[], tsumo_tile=<GameTile.S7: 24>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=62, data={'tile': 24, 'is_tsumogiri': True})
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 24
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:07:07 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:07 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=64, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=64, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.194초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=64, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.194 seconds)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 0: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=64, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 66
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=66, data={'tile': 2, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=66, data={'tile': 2, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.207초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=66, data={'tile': 2, 'is_tsumogiri': False}) (elapsed_time: 0.207초)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 67
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1}), call_blocks=[], tsumo_tile=<GameTile.M8: 7>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=66, data={'tile': 2, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 2
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=68, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=68, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.215초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=68, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.215 seconds)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 1: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=68, data={'tile': <GameTile.M1: 0>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 70
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=70, data={'tile': <GameTile.F6: 40>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=70, data={'tile': <GameTile.F6: 40>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.211초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=70, data={'tile': <GameTile.F6: 40>}) (elapsed_time: 0.211초)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 71
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 2, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1, <GameTile.F6: 40>: 1}), call_blocks=[], tsumo_tile=<GameTile.F6: 40>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=70, data={'tile': <GameTile.F6: 40>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=70, data={'tile': <GameTile.F6: 40>})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: FLOWER
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 73
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=73, data={'tile': 19, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=73, data={'tile': 19, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.234초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=73, data={'tile': 19, 'is_tsumogiri': False}) (elapsed_time: 0.234초)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 74
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 3, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.S2: 19>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1}), call_blocks=[], tsumo_tile=<GameTile.P7: 15>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=73, data={'tile': 19, 'is_tsumogiri': False})
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 19
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:08 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:08 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 77
May 26 10:07:09 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:09 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:09 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:09 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.000초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: None (elapsed_time: 20.000 seconds)
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [DEBUG] No event received within wait_time.
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [DEBUG] Updated remaining_time for seat 1: 0.000 seconds
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [DEBUG] Removed seat 1 due to timeout.
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 50
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:10 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:10 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=77, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=77, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 2.670초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=77, data={'tile': 30, 'is_tsumogiri': False}) (elapsed_time: 2.670초)
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 78
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.S8: 25>: 2, <GameTile.Z4: 30>: 1, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.S4: 21>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.S4: 21>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=77, data={'tile': 30, 'is_tsumogiri': False})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 30
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 81
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=81, data={'tile': 30, 'is_tsumogiri': True})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=81, data={'tile': 30, 'is_tsumogiri': True})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.197초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=81, data={'tile': 30, 'is_tsumogiri': True}) (elapsed_time: 0.197초)
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 82
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.M1: 0>: 2, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z2: 28>: 1, <GameTile.Z5: 31>: 1, <GameTile.Z4: 30>: 1}), call_blocks=[], tsumo_tile=<GameTile.Z4: 30>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=81, data={'tile': 30, 'is_tsumogiri': True})
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 30
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 85
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:11 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:11 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=85, data={'tile': 18, 'is_tsumogiri': False})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=85, data={'tile': 18, 'is_tsumogiri': False})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.209초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=85, data={'tile': 18, 'is_tsumogiri': False}) (elapsed_time: 0.209초)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 86
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.S1: 18>: 1, <GameTile.M8: 7>: 1, <GameTile.P8: 16>: 1}), call_blocks=[], tsumo_tile=<GameTile.P8: 16>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=85, data={'tile': 18, 'is_tsumogiri': False})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 18
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 89
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=89, data={'tile': 8, 'is_tsumogiri': True})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=89, data={'tile': 8, 'is_tsumogiri': True})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.233초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=89, data={'tile': 8, 'is_tsumogiri': True}) (elapsed_time: 0.233초)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 90
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 3, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1, <GameTile.M9: 8>: 1}), call_blocks=[], tsumo_tile=<GameTile.M9: 8>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=89, data={'tile': 8, 'is_tsumogiri': True})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 8
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 93
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=93, data={'tile': <GameTile.F0: 34>})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=93, data={'tile': <GameTile.F0: 34>})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.296초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=93, data={'tile': <GameTile.F0: 34>}) (elapsed_time: 0.296초)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 94
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.S8: 25>: 2, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.S4: 21>: 1, <GameTile.F0: 34>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.F0: 34>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=93, data={'tile': <GameTile.F0: 34>})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.FLOWER: 7>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=93, data={'tile': <GameTile.F0: 34>})
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: FLOWER
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 96
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:12 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:12 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=96, data={'tile': 0, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=96, data={'tile': 0, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.246초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=96, data={'tile': 0, 'is_tsumogiri': True}) (elapsed_time: 1.246초)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 97
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.S8: 25>: 2, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.S4: 21>: 1, <GameTile.M1: 0>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.M1: 0>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=96, data={'tile': 0, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 0
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.NORTH: 3>}
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.NORTH: 3>}, wait_time: 20.000 seconds
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.209초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.209 seconds)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 3: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=0), selected_events count: 1
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Final action selected, breaking out of wait loop.
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=0), total selected events: 1
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=98, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=100, data={'tile': 28, 'is_tsumogiri': False})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=100, data={'tile': 28, 'is_tsumogiri': False})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.187초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: PON, tile: 28
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 105
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 타임아웃 발생
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 20.040초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: None (elapsed_time: 20.040초)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 응답 없음 - 자동 DISCARD 이벤트 생성
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 생성된 자동 DISCARD 이벤트: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1793, data={'tile': <GameTile.M9: 8>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 1793
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M4: 3>: 2, <GameTile.M5: 4>: 2, <GameTile.M6: 5>: 1, <GameTile.P1: 9>: 1, <GameTile.P6: 14>: 1, <GameTile.S3: 20>: 1, <GameTile.S9: 26>: 1, <GameTile.P5: 13>: 1, <GameTile.P3: 11>: 1, <GameTile.M3: 2>: 1, <GameTile.M1: 0>: 1, <GameTile.M9: 8>: 1}), call_blocks=[], tsumo_tile=<GameTile.M9: 8>, flower_point=1, FULL_HAND_SIZE=14)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=1793, data={'tile': <GameTile.M9: 8>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 8
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.EAST: 0>}
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.EAST: 0>}, wait_time: 20.000 seconds
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=105, data={'tile': 4, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=105, data={'tile': 4, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.209초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=105, data={'tile': 4, 'is_tsumogiri': True}) (elapsed_time: 0.209초)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 106
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.S6: 23>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.M8: 7>: 1, <GameTile.P8: 16>: 1, <GameTile.M5: 4>: 1}), call_blocks=[], tsumo_tile=<GameTile.M5: 4>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=105, data={'tile': 4, 'is_tsumogiri': True})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 4
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.SOUTH: 1>}
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.SOUTH: 1>}, wait_time: 20.000 seconds
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=107, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=107, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.216초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=107, data={'tile': <GameTile.M1: 0>}) (elapsed_time: 0.216 seconds)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 1: GameEvent(event_type=<GameEventType.SKIP: 13>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=107, data={'tile': <GameTile.M1: 0>})
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.SKIP: 0>, seat_priority=<RelativeSeat.SHIMO: 1>, tile=<GameTile.M1: 0>)
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: None, selected_events count: 1
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 1
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:14 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:14 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 109
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=109, data={'tile': 1, 'is_tsumogiri': False})
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=109, data={'tile': 1, 'is_tsumogiri': False})
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.242초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=109, data={'tile': 1, 'is_tsumogiri': False}) (elapsed_time: 0.242초)
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 110
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 3, <GameTile.M2: 1>: 1, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1, <GameTile.P5: 13>: 1}), call_blocks=[], tsumo_tile=<GameTile.P5: 13>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=109, data={'tile': 1, 'is_tsumogiri': False})
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 1
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 113
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:15 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:15 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=113, data={'tile': 12, 'is_tsumogiri': True})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=113, data={'tile': 12, 'is_tsumogiri': True})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.075초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=113, data={'tile': 12, 'is_tsumogiri': True}) (elapsed_time: 1.075초)
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 114
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.S3: 20>: 3, <GameTile.Z1: 27>: 2, <GameTile.S8: 25>: 2, <GameTile.S9: 26>: 1, <GameTile.S2: 19>: 1, <GameTile.S4: 21>: 1, <GameTile.P4: 12>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.Z7: 33>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.P4: 12>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=113, data={'tile': 12, 'is_tsumogiri': True})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 12
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 117
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=117, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=117, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.197초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=117, data={'tile': 27, 'is_tsumogiri': False}) (elapsed_time: 0.197초)
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 118
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.Z1: 27>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z5: 31>: 1, <GameTile.Z3: 29>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.M1: 0>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.Z3: 29>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=117, data={'tile': 27, 'is_tsumogiri': False})
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 27
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.WEST: 2>}
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.WEST: 2>}, wait_time: 20.000 seconds
May 26 10:07:16 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:16 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>})
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>})
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 1.256초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] safe_wait_for returned event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>}) (elapsed_time: 1.256 seconds)
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] Received event from player 2: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>})
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] Created action from received event: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=<GameTile.Z1: 27>)
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] After push_action, final_action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=27), selected_events count: 1
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] Final action selected, breaking out of wait loop.
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: Action(type=<ActionType.PON: 3>, seat_priority=<RelativeSeat.KAMI: 3>, tile=27), total selected events: 1
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>})
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: initialized with event: GameEvent(event_type=<GameEventType.PON: 6>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': <GameTile.Z1: 27>})
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:17 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:17 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: calling do_action
May 26 10:07:18 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:18 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:19 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:19 DEBUG [app.services.game_manager.manager] invalid action id: action id: 121, event GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=119, data={'tile': 26, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=121, data={'tile': 26, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.WEST: 2>, action_id=121, data={'tile': 26, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 3.102초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: PON, tile: 26
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] ActionState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 126
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=126, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=126, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.195초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=126, data={'tile': 31, 'is_tsumogiri': False}) (elapsed_time: 0.195초)
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 127
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P1: 9>: 2, <GameTile.P4: 12>: 1, <GameTile.S4: 21>: 1, <GameTile.M3: 2>: 1, <GameTile.S2: 19>: 1, <GameTile.Z6: 32>: 1, <GameTile.S1: 18>: 1, <GameTile.Z5: 31>: 1, <GameTile.Z3: 29>: 1, <GameTile.S9: 26>: 1}), call_blocks=[CallBlock(type=<CallBlockType.PUNG: 1>, first_tile=<GameTile.M1: 0>, source_seat=<RelativeSeat.KAMI: 3>, source_tile_index=0)], tsumo_tile=<GameTile.S9: 26>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.NORTH: 3>, action_id=126, data={'tile': 31, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 31
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 130
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=130, data={'tile': 22, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=130, data={'tile': 22, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.210초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=130, data={'tile': 22, 'is_tsumogiri': False}) (elapsed_time: 0.210초)
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 131
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.P9: 17>: 2, <GameTile.P6: 14>: 2, <GameTile.S4: 21>: 2, <GameTile.M8: 7>: 2, <GameTile.S6: 23>: 1, <GameTile.S5: 22>: 1, <GameTile.S7: 24>: 1, <GameTile.S8: 25>: 1, <GameTile.P3: 11>: 1, <GameTile.P8: 16>: 1}), call_blocks=[], tsumo_tile=<GameTile.M8: 7>, flower_point=0, FULL_HAND_SIZE=14)
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.EAST: 0>, action_id=130, data={'tile': 22, 'is_tsumogiri': False})
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 22
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: set()
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [DEBUG] Exiting _wait_for_player_actions. Final action: None, total selected events: 0
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: do_discard returned: None
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: event is None, transition to TsumoState with prev_type=DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: initialized with prev_type: DISCARD
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: transition to next state
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: calling do_tsumo
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 시작
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] action_id 증가: 134
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] tsumo actions 메시지 전송 완료
May 26 10:07:21 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:21 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [GameManager.add_event] Event added: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=134, data={'tile': 18, 'is_tsumogiri': True})
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [safe_wait_for] 결과 받음: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=134, data={'tile': 18, 'is_tsumogiri': True})
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [safe_wait_for] 전체 소요: 0.237초, 최종 남은 시간: {self.remaining_time:.3f}초
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] event_queue 응답: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=134, data={'tile': 18, 'is_tsumogiri': True}) (elapsed_time: 0.237초)
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 정상 응답 이벤트 수신
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [send_tsumo_actions_and_wait] 최종 action_id: 135
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: Hand: GameHand(tiles=Counter({<GameTile.M6: 5>: 3, <GameTile.P7: 15>: 3, <GameTile.M5: 4>: 1, <GameTile.P1: 9>: 1, <GameTile.P2: 10>: 1, <GameTile.P6: 14>: 1, <GameTile.M4: 3>: 1, <GameTile.P3: 11>: 1, <GameTile.P5: 13>: 1, <GameTile.S1: 18>: 1}), call_blocks=[], tsumo_tile=<GameTile.S1: 18>, flower_point=2, FULL_HAND_SIZE=14)
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: do_tsumo returned: GameEvent(event_type=<GameEventType.DISCARD: 0>, player_seat=<AbsoluteSeat.SOUTH: 1>, action_id=134, data={'tile': 18, 'is_tsumogiri': True})
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: initialized with prev_type: TSUMO, tile: 18
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.fsm.round_fsm] TsumoState: transition to next state
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.fsm.round_fsm] DiscardState: calling do_discard
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [DEBUG] Starting _wait_for_player_actions. Initial pending_players: {<AbsoluteSeat.WEST: 2>}
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [DEBUG] Waiting for player action. Pending players: {<AbsoluteSeat.WEST: 2>}, wait_time: 20.000 seconds
May 26 10:07:22 ip-172-31-13-179 python[679345]: 2025-05-26 10:07:22 DEBUG [app.services.game_manager.manager] [safe_wait_for] 시작: remaining_time=20.000초
